/************************************************************
  OpenDT — Liquid Glass UI (Apple macOS / iOS-style, v3)
************************************************************/

/* 0) Fonts */
@font-face{font-family:"SF Pro Text";src:local("SF Pro Text"),local("-apple-system");font-display:swap}
:root{
  --font: Inter,"SF Pro Text",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";

  /* Apple neutrals (light) */
  --ink:#0b1220;            /* text */
  --ink-muted:#6b7280;
  --bg:#f5f5f7;             /* Apple site gray */
  --bg-1:#fafafa;
  --bg-2:#eef1f5;

  /* Apple accents (macOS/iOS) */
  --blue:#007aff;      /* iOS primary */
  --blue-2:#0a84ff;    /* macOS primary */
  --green:#34c759;
  --red:#ff3b30;
  --yellow:#ffd60a;
  --indigo:#5e5ce6;
  --teal:#64d2ff;

  /* Glass */
  --surface:rgba(255,255,255,.72);
  --surface-strong:rgba(255,255,255,.82);
  --surface-weak:rgba(255,255,255,.52);
  --glass-border:rgba(255,255,255,.55);
  --hairline:rgba(0,0,0,.08);
  --hairline-strong:rgba(0,0,0,.14);

  --shadow-1:0 6px 18px rgba(16,18,27,.08);
  --shadow-2:0 12px 30px rgba(16,18,27,.14);
  --shadow-3:0 24px 60px rgba(16,18,27,.18);

  --h1:24px; --h2:18px; --sub:13px;
  --ease-spring:cubic-bezier(.2,.8,.2,1);
  --dur-quick:160ms; --dur-mid:260ms; --dur-slow:420ms;

  --row-bg:rgba(255,255,255,.6);
  --code-bg:rgba(17,24,39,.78); --code-ink:#e5e7eb;

  --icon:20px;
  --dock-size:64px;
}

/* dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --ink:#e7eaf0; --ink-muted:#9aa3b2;
    --bg:#0d0f13; --bg-1:#0d0f13; --bg-2:#131722;

    --surface:rgba(28,33,43,.58);
    --surface-strong:rgba(28,33,43,.7);
    --surface-weak:rgba(28,33,43,.38);
    --glass-border:rgba(255,255,255,.08);
    --hairline:rgba(255,255,255,.10);
    --hairline-strong:rgba(255,255,255,.16);

    --row-bg:rgba(255,255,255,.07);
    --code-bg:rgba(0,0,0,.65); --code-ink:#e5e7eb;
  }
}

/* 1) Base layout & background */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:var(--font); color:var(--ink);
  background:
    radial-gradient(1100px 700px at 10% -10%, #ffffff 0%, transparent 60%),
    radial-gradient(1000px 600px at 90% 0%, #e8ecf6 0%, transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  background-attachment:fixed;
}
.container{max-width:1440px;margin:0 auto;padding:28px}

/* 2) Liquid glass primitives */
.glass{
  background:var(--surface);
  -webkit-backdrop-filter:saturate(180%) blur(22px);
  backdrop-filter:saturate(180%) blur(22px);
  border:1px solid var(--glass-border);
  box-shadow:var(--shadow-1);
  position:relative; overflow:hidden;
}

.slo-inputs {
  padding: 20px;
  margin-top: 20px;
  border-radius: 8px;
}

.input-group {
  margin-bottom: 16px;
}

.input-group label {
  display: block;
  margin-bottom: 8px;
  color: var(--ink-muted);
  font-size: 14px;
}

.glass-input {
  width: 100%;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid var(--glass-border);
  background: var(--surface-weak);
  color: var(--ink);
  font-size: 14px;
  transition: all var(--dur-quick) var(--ease-spring);
}

.glass-input:focus {
  outline: none;
  border-color: var(--blue);
  background: var(--surface-strong);
  box-shadow: 0 0 0 2px rgba(0,122,255,0.1);
}

.glass-btn {
  margin-top: 8px;
  width: 100%;
  justify-content: center;
}
.glass::before,.glass::after{content:"";position:absolute;inset:0;pointer-events:none}
.glass::before{
  background:linear-gradient(to bottom, rgba(255,255,255,.42), transparent 60%);
  mix-blend-mode:screen; opacity:.55;
}
.glass::after{
  background:radial-gradient(120% 100% at 50% 120%, rgba(0,0,0,.14), transparent 55%);
  opacity:.2;
}
.lift{transition:transform var(--dur-quick) var(--ease-spring), box-shadow var(--dur-quick) var(--ease-spring), filter var(--dur-quick)}
.lift:hover{transform:translateY(-2px); box-shadow:var(--shadow-2)}
.lift:active{transform:translateY(0) scale(.992); box-shadow:var(--shadow-1)}
.sheen{position:relative;overflow:hidden}
.sheen::after{
  content:"";position:absolute;inset:-40%;
  background:
    radial-gradient(50% 60% at 0% 0%, rgba(255,255,255,.16), transparent 55%),
    radial-gradient(40% 50% at 100% 20%, rgba(255,255,255,.12), transparent 60%),
    radial-gradient(60% 60% at 30% 110%, rgba(255,255,255,.10), transparent 70%);
  transition:transform 1100ms var(--ease-spring); mix-blend-mode:screen;
}
.sheen:hover::after{transform:translate3d(-4%,-2%,0)}
.sheen:active::after{transform:translate3d(-1%,-1%,0) scale(.995)}

/* 3) Header */
.header{
  border-radius:20px; color:#fff; padding:24px 22px;
  background:linear-gradient(180deg, rgba(22,24,30,.88), rgba(22,24,30,.74));
  border:1px solid rgba(255,255,255,.08); box-shadow:0 24px 48px rgba(0,0,0,.35);
}
.header h1{margin:0 0 6px; font-size:var(--h1); letter-spacing:.2px; display:flex; align-items:center; gap:8px}
.header .icon{filter:drop-shadow(0 1px 0 rgba(255,255,255,.25)) invert(1) opacity(.9)}
.header .sub{opacity:.92; font-size:var(--sub)}

/* 4) Buttons (Apple accent) */
.btn{
  --press-x:50%; --press-y:50%;
  position:relative; overflow:hidden; border:0; border-radius:14px;
  padding:12px 16px; font-weight:800; cursor:pointer; color:#fff;
  box-shadow:0 1px 0 rgba(255,255,255,.18) inset, var(--shadow-1);
  -webkit-backdrop-filter:saturate(180%) blur(10px);
  backdrop-filter:saturate(180%) blur(10px);
  transition:transform var(--dur-quick) var(--ease-spring), box-shadow var(--dur-quick), filter var(--dur-quick);
}
.btn:hover{transform:translateY(-1px); box-shadow:var(--shadow-2)}
.btn:active{transform:translateY(0) scale(.985); filter:brightness(.96)}
.btn::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:radial-gradient(140px 140px at var(--press-x) var(--press-y), rgba(255,255,255,.38), transparent 60%);
  opacity:0; transform:scale(.8);
  transition:opacity 380ms var(--ease-spring), transform 380ms var(--ease-spring);
}
.btn:active::after{opacity:.75; transform:scale(1)}
.btn:hover::after{opacity:.22}
.btn-primary{background:linear-gradient(180deg, color-mix(in srgb, var(--blue) 90%, white 10%), var(--blue-2))}
.btn-danger{background:linear-gradient(180deg, color-mix(in srgb, var(--red) 90%, white 10%), var(--red))}
.btn-ghost{background:var(--surface-weak); color:var(--ink); border:1px solid var(--hairline)}

.badge{
  display:inline-flex; align-items:center; gap:6px;
  background:color-mix(in srgb, var(--blue) 12%, white 88%);
  color:#0b3d99; border:1px solid color-mix(in srgb, var(--blue) 20%, white 80%);
  padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px;
}

/* 5) Icons via masks */
.icon{width:var(--icon); height:var(--icon); display:inline-block; background:currentColor; -webkit-mask:var(--icon-url) center/contain no-repeat; mask:var(--icon-url) center/contain no-repeat}
:root{
  --sym-play:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 22 22'><path d='M7 5.5v11l10-5.5-10-5.5Z'/></svg>");
  --sym-stop:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><rect x="6" y="6" width="10" height="10" rx="2"/></svg>');
  --sym-gauge:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a9 9 0 1 0 9 9h-2a7 7 0 1 1-7-7V4z"/><path d="M13 12l4-4" stroke="black" stroke-width="3" stroke-linecap="round"/></svg>');
  --sym-bolt:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M12.5 1 4 12h5l-1.5 9L19 9h-5l-1.5-8Z"/></svg>');
  --sym-cpu:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><rect x="5" y="5" width="12" height="12" rx="2"/><rect x="8" y="8" width="6" height="6" rx="1"/></svg>');
  --sym-clock:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><circle cx="11" cy="11" r="8"/><path d="M11 6v6l4 2" stroke="black" stroke-width="2" stroke-linecap="round" fill="none"/></svg>');
  --sym-topo:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><circle cx="11" cy="5" r="2"/><circle cx="6" cy="15" r="2"/><circle cx="16" cy="15" r="2"/><path d="M11 7v4M9 11l-2 2M13 11l2 2" stroke="black" stroke-width="2" fill="none" stroke-linecap="round"/></svg>');
  --sym-wand:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M3 19l8-8 2 2-8 8z"/><path d="M14 3l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"/></svg>');
  --sym-chart:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><rect x="4" y="12" width="3" height="6"/><rect x="9" y="9" width="3" height="9"/><rect x="14" y="6" width="3" height="12"/></svg>');
  --sym-check:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M4.5 11.5l4.3 4.3 8.7-8.7" fill="none" stroke="black" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/></svg>');
  --sym-edit:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M4 14.5V18h3.5L17 8.5 13.5 5 4 14.5z"/><path d="M12.8 5.7l3.5 3.5" fill="none" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');
}

/* 6) Status + segmented control */
.status{
  display:flex; align-items:center; gap:8px; background:var(--surface-weak);
  padding:10px 14px; border-radius:999px; border:1px solid var(--glass-border);
  -webkit-backdrop-filter:blur(14px) saturate(160%); backdrop-filter:blur(14px) saturate(160%);
  box-shadow:var(--shadow-1)
}
.status .dot{width:10px;height:10px;border-radius:999px;background:#9ca3af;box-shadow:0 0 0 3px rgba(0,0,0,.04) inset}
.status.running .dot{background:var(--green)}
.status.stopped .dot{background:var(--red)}
.mode-switch{margin-left:12px}

.seg{display:inline-flex; gap:2px; padding:4px; border-radius:9999px; background:var(--surface-weak); border:1px solid var(--glass-border); -webkit-backdrop-filter:blur(14px) saturate(160%); backdrop-filter:blur(14px) saturate(160%); box-shadow:var(--shadow-1)}
.seg button{border:0;background:transparent;padding:8px 14px;border-radius:9999px;font-weight:700;cursor:pointer;color:var(--ink);transition:background var(--dur-quick), transform var(--dur-quick)}
.seg button:hover{transform:translateY(-1px)}
.seg button.active{background:var(--surface-strong); border:1px solid var(--hairline); box-shadow:inset 0 1px 0 rgba(255,255,255,.35)}

/* 7) Metrics & cards */
.metrics{display:grid; grid-template-columns:repeat(auto-fit,minmax(230px,1fr)); gap:18px; margin:20px 0; grid-template-columns: repeat(6, 1fr)}
.metric{border-radius:18px; padding:18px; position:relative}
.metric h3{margin:0 0 6px; font-size:12px; letter-spacing:.08em; color:var(--ink-muted); display:flex; align-items:center; gap:6px}
.metric .value{font-size:28px; font-weight:900}
.metric:hover::before{content:""; position:absolute; inset:0; pointer-events:none; background:linear-gradient(115deg, transparent 40%, rgba(255,255,255,.18) 50%, transparent 60%); transform:translateX(-120%); animation:sweep 900ms var(--ease-spring)}
.metric:hover{box-shadow:var(--shadow-2), 0 0 0 4px color-mix(in srgb, var(--blue) 16%, transparent)}
@keyframes sweep{to{transform:translateX(120%)}}

.section-grid{display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-bottom:20px}
.card{border-radius:18px; padding:18px}
.card h3{margin:0 0 12px; font-size:15px}

/* KV rows */
.kv{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.kv>div{display:flex; flex-direction:column; justify-content:space-between; padding:12px 14px; border-radius:12px; background:var(--surface-weak); border:1px solid var(--hairline); transition:transform var(--dur-quick), box-shadow var(--dur-quick)}
.kv>div:hover{transform:translateY(-1px); box-shadow:var(--shadow-1)}
.kv span{color:var(--ink-muted); font-size:12px; margin-bottom:8px}
.kv strong{font-weight:800}

.slo-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.slo-field {
    flex: 1;
    min-width: 140px;
    height: 32px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 6px;
    padding: 4px 8px;
    color: var(--ink);
    font-size: 13px;
}

.slo-field:focus {
    outline: none;
    border-color: var(--blue);
    background: rgba(255,255,255,0.15);
}

.slo-field::placeholder {
    color: rgba(255,255,255,0.5);
}

/* SLO inputs compact grid */
.slo-inputs { padding: 8px 12px; }
.slo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; align-items: center; }
.slo-grid .input-group { margin: 0; padding: 2px 4px; }
.slo-grid label { font-size: 11px; color: var(--ink-muted); margin-bottom: 4px; }
.slo-grid .glass-input { padding: 6px 8px; border-radius: 8px; font-size: 13px; }
.slo-actions { grid-column: 1 / -1; display:flex; margin-top: 8px; }
.slo-actions .glass-btn { width: auto; padding: 8px 12px; margin-left: auto; border-radius: 10px; font-size: 13px; }

@media (max-width: 720px) {
  .slo-grid { grid-template-columns: 1fr; gap: 12px; }
  .slo-actions { justify-content: stretch; }
  .slo-actions .glass-btn { width:100%; margin-left:0 }
}

/* Pill-style inputs (compact, rounded with right sigil) */
.pill-input{ display:flex; align-items:center; gap:8px; padding:8px 12px 8px 14px; background:rgba(255,255,255,0.98); border-radius:20px; border:1px solid rgba(0,0,0,0.06); box-shadow:0 4px 12px rgba(16,18,27,0.04); min-height:36px }
.pill-field{ flex:1; border:0; background:transparent; padding:4px 6px; font-size:13px; color:var(--ink-muted); outline:none; line-height:1 }
.pill-field::placeholder{ color:var(--ink-muted); opacity:0.7 }
.pill-sigil{ display:inline-flex; align-items:center; justify-content:center; width:16px; height:4px; border-radius:4px; background:rgba(17,20,25,0.9); color:#fff; font-weight:700; border:0; font-size:9px }

/* subtle inner top highlight to match screenshot */
.pill-input::before{ content:''; position:absolute; pointer-events:none; inset:auto auto 100% 0; height:1px }

/* make each pill visually separated on wide screens with subtle divider */
.slo-grid > .input-group { background: transparent }
.slo-grid > .input-group .pill-input { width: 100% }

.visually-hidden{ position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap }

.slo-submit {
    margin-top: 16px;
    padding: 0 14px 14px;
    display: flex;
    justify-content: flex-end;
}

.slo-submit .btn {
    min-width: 120px;
}

/* panel */
.panel{margin-top:12px; border-radius:12px; border:1px solid var(--hairline); background:var(--surface-weak)}
.panel-title{padding:10px 12px; border-bottom:1px solid var(--hairline); font-weight:700; background:linear-gradient(180deg, rgba(255,255,255,.25), transparent)}

/* Recommendation action buttons */
.rec-actions {
    display: flex;
    margin-top: 1rem;
    padding: 1rem;
    justify-content: center;
}

.btn-success {
    background: linear-gradient(180deg, 
        color-mix(in srgb, var(--green) 70%, white 30%),
        color-mix(in srgb, var(--green) 90%, white 10%)
    );
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: 
        0 1px 0 rgba(255,255,255,.5) inset,
        0 8px 20px rgba(52,199,89,.15);
    backdrop-filter: blur(8px);
}

.btn-success:hover {
    background: linear-gradient(180deg,
        color-mix(in srgb, var(--green) 65%, white 35%),
        color-mix(in srgb, var(--green) 85%, white 15%)
    );
    transform: translateY(-1px);
    box-shadow: 
        0 1px 0 rgba(255,255,255,.5) inset,
        0 12px 28px rgba(52,199,89,.2);
}

.btn-danger {
    background: linear-gradient(180deg,
        color-mix(in srgb, var(--red) 70%, white 30%),
        color-mix(in srgb, var(--red) 90%, white 10%)
    );
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: 
        0 1px 0 rgba(255,255,255,.5) inset,
        0 8px 20px rgba(255,59,48,.15);
    backdrop-filter: blur(8px);
}

.btn-danger:hover {
    background: linear-gradient(180deg,
        color-mix(in srgb, var(--red) 65%, white 35%),
        color-mix(in srgb, var(--red) 85%, white 15%)
    );
    transform: translateY(-1px);
    box-shadow: 
        0 1px 0 rgba(255,255,255,.5) inset,
        0 12px 28px rgba(255,59,48,.2);
}

/* 8) Table */
table{width:100%; border-collapse:separate; border-spacing:0 10px}
thead th{font-size:12px; color:var(--ink-muted); text-align:left; padding:6px 10px}
tbody td{background:var(--row-bg); padding:12px 12px; border-top:1px solid var(--hairline); border-bottom:1px solid var(--hairline); transition:background var(--dur-quick)}
tbody tr td:first-child{border-top-left-radius:12px; border-bottom-left-radius:12px}
tbody tr td:last-child{border-top-right-radius:12px; border-bottom-right-radius:12px}
tbody tr:hover td{background:color-mix(in srgb, var(--row-bg) 85%, white 15%)}

.rec-actions{display:flex; gap:10px; margin:16px 0 12px; flex-wrap:wrap; align-items:center}
.rec-actions .btn{flex:0 0 auto}
.rec-edit-input{width:100%; padding:8px 10px; border-radius:10px; border:1px solid var(--hairline); background:var(--surface-strong); color:inherit; font:inherit}
.rec-edit-input:focus{border-color:color-mix(in srgb, var(--blue) 65%, white 35%); box-shadow:0 0 0 3px color-mix(in srgb, var(--blue) 30%, transparent 70%)}
.llm-reason{margin:14px 0 6px; color:var(--ink-muted); line-height:1.45}
.llm-reason.placeholder{opacity:.7; font-style:italic}
.rec-table-editing tbody td{background:color-mix(in srgb, var(--row-bg) 80%, white 20%)}

/* 9) JSON mode */
.json-only{display:none; white-space:pre-wrap; background:var(--code-bg); color:var(--code-ink); border-radius:12px; padding:14px; border:1px solid rgba(255,255,255,.08); box-shadow:inset 0 1px 0 rgba(255,255,255,.05)}
.ui-only{display:block}
.mode-json .ui-only{display:none}
.mode-json .json-only{display:block}

/* 10) Misc */
:focus-visible{outline:2px solid color-mix(in srgb, var(--blue) 70%, white 30%); outline-offset:2px; border-radius:12px}
*{scrollbar-width:thin; scrollbar-color:color-mix(in srgb, var(--ink) 35%, transparent) transparent}
*::-webkit-scrollbar{height:10px; width:10px}
*::-webkit-scrollbar-track{background:transparent}
*::-webkit-scrollbar-thumb{background:color-mix(in srgb, var(--ink) 25%, transparent); border-radius:999px; border:2px solid transparent; background-clip:padding-box}
*::-webkit-scrollbar-thumb:hover{background:color-mix(in srgb, var(--ink) 35%, transparent)}

.container{padding-top:32px} .header{margin-bottom:24px} .controls{margin-bottom:22px} .metrics{margin-bottom:22px} .section-grid{margin-bottom:22px}
.compact .metric .value{font-size:24px} .compact .kv{grid-template-columns:1fr}

.controls, .metrics .metric, .card, .status, .seg{background:var(--surface); -webkit-backdrop-filter:saturate(180%) blur(22px); backdrop-filter:saturate(180%) blur(22px); border:1px solid var(--glass-border); box-shadow:var(--shadow-1)}
.controls{background:var(--surface-strong)}
.metrics .metric:hover, .card:hover{box-shadow:var(--shadow-2)}

/* --- Softer radii + lighter borders for the status area (and siblings) --- */
:root{
  --r-sm: 14px;
  --r-md: 18px;
  --r-lg: 22px;
  --r-xl: 26px;
}


/* Status strip (the “Status: RUNNING” bar) */
.status{
  border-radius: var(--r-xl) !important;
  padding: 12px 18px !important;
  border-color: rgba(255,255,255,.40) !important;
  box-shadow:
    0 1px 0 rgba(255,255,255,.25) inset,
    0 10px 24px rgba(16,18,27,.10) !important;
}

/* The white control container bar beneath the header */
.controls{
  border-radius: var(--r-xl) !important;
  box-shadow:
    0 1px 0 rgba(255,255,255,.25) inset,
    0 14px 30px rgba(16,18,27,.10) !important;
}

/* Segmented control + its buttons (UI / JSON) */
.seg{
  border-radius: 9999px !important;
  padding: 5px !important;
}
.seg button{
  border-radius: 9999px !important;
}
.seg button.active{
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 6px 14px rgba(16,18,27,.06) !important;
}

/* Cards and metric tiles — slightly rounder to match */
.card,
.metrics .metric{
  border-radius: var(--r-lg) !important;
}

/* KV rows inside cards */
.kv > div{
  border-radius: var(--r-md) !important;
}

/* Make the little “dot” in the status pill a hair softer */
.status .dot{
  box-shadow: 0 0 0 4px rgba(0,0,0,.03) inset;
}


/* =========================================
   @Large “energy” header (teal → cyan → blue)
   ========================================= */
.header.energy-header{
  /* keep your rounded Apple glass shape but recolor */
  color:#fff;
  border-radius:28px; /* a bit rounder per your feedback */
  background:
    /* dark glass base for depth */
    linear-gradient(180deg, rgba(10,14,22,.92), rgba(10,14,22,.82)),
    /* soft teal glow left */
    radial-gradient(120% 180% at -10% -40%, rgba(0,194,168,.35) 0%, transparent 60%),
    /* cyan glow right */
    radial-gradient(120% 180% at 110% -30%, rgba(0,181,226,.33) 0%, transparent 60%),
    /* subtle color ribbon across */
    linear-gradient(90deg, #00c2a8 0%, #00b5e2 48%, #0066ff 100%);
  background-blend-mode: overlay, normal, normal, color;
  border: 1px solid rgba(255,255,255,.10);
  box-shadow:
    0 22px 55px rgba(0, 40, 80, .28),
    inset 0 1px 0 rgba(255,255,255,.18);
}
.header.energy-header::before{
  /* refined highlight */
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(to bottom, rgba(255,255,255,.14), transparent 55%);
  mix-blend-mode: screen; opacity:.9;
}

/* =========================================
   Controls in one single row (no wrapping)
   ========================================= */
.controls .row{
  display:flex;
  align-items:center;
  gap:14px;
}
.controls .mode-switch{ margin-left:12px; } /* pushes UI/JSON (and your theme switcher if any) to the right */

/* keep the big rounded, non-pointy feel */
.controls,
.status,
.seg { border-radius: 22px; }
.btn { border-radius: 16px; }

/* ensure the status pill and the segmented control align nicely */
.status{ padding:10px 14px; height:44px; margin: 20px }
.seg button{ height:40px; display:inline-flex; align-items:center; }

/* optional: keep Start button visually dominant without growing too tall */
#toggleBtn{ height:48px; padding: 0 16px; display:inline-flex; align-items:center; gap:8px; }

.controls .row { padding-inline: 12px; }      /* space from container edges */
.controls .row > * { margin-inline: 6px; }    /* Start / Status / UI–JSON */

/* Right-side window chip in controls bar */
.window-pill{
  margin-left:auto;                     /* <-- key */
  background: var(--surface-weak);
  border: 1px solid var(--glass-border);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  backdrop-filter: blur(14px) saturate(160%);
  box-shadow: var(--shadow-1);
  padding: 10px 14px;
  border-radius: 999px;
  font-weight: 700;
  white-space: nowrap;
  margin-right: 15px;
}
@media (max-width: 720px){
  .window-pill{ display:none; } /* optional: hide on small screens */
}



.kv + .kv {
  margin-top: 2rem; /* Adjust as needed for more/less space */
}

/* Or, if you want to target just the input group */
.input-group {
  margin-top: 1.5rem;
}

/* --- CHARTS (clean, responsive) --- */

/* one-column stack, same spacing as other sections */
.section-stack{
  display:flex;
  flex-direction:column;
  gap:18px;
  margin-bottom:22px;
  width:100%;
}

/* chart cards fill the width */
.section-stack .card{
  width:100%;
  border-radius: var(--r-lg);
  padding:18px;
}

/* Plot container sizing */
.chart-wrap{ width:100%; }
.chart{
  width:100%;
  min-height:360px;
}

/* Force Plotly internals to be fluid */
.plotly,
.plot-container,
.plotly-graph-div{
  width:100% !important;
  height:100% !important;
}

/* Optional: nicer modebar look */
.plotly .modebar { background: transparent; }
.plotly .modebar-btn svg { fill: #cbd5e1 !important; }
.plotly .modebar-btn:hover svg,
.plotly .modebar-btn.active svg { fill: #22d3ee !important; }
.plotly .modebar-btn:hover {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 8px;
}

.chart-toolbar{
  display:flex; gap:.5rem; align-items:center; margin-bottom:.5rem;
}
.chart-toolbar .btn-ghost{
  padding:.4rem .8rem; border:1px solid var(--glass-border);
  background:transparent; border-radius:.6rem; cursor:pointer;
}
.chart-toolbar .hint{opacity:.7; font-size:.85rem; margin-left:auto;}

/* Plotly toolbar dark theme */
:root{
  /* tweak these to taste */
  --plotly-modebar-bg: rgba(255,255,255,0.08);
  --plotly-icon:        #e5e7eb;   /* slate-200 */
  --plotly-icon-hover:  #f3f4f6;   /* gray-100 */
  --plotly-icon-active: #22d3ee;   /* cyan/mint highlight */
  --plotly-rs-bg:       rgba(255,255,255,0.06);
}

.js-plotly-plot .modebar{
  background: var(--plotly-modebar-bg) !important;
  backdrop-filter: blur(2px);
  border-radius: 10px !important;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
  padding: 2px 4px;
}

.js-plotly-plot .modebar-btn{
  background: transparent !important;
  border-radius: 8px !important;
  margin: 0 2px !important;
}

.js-plotly-plot .modebar-btn:hover{
  background: rgba(255,255,255,0.18) !important;
}

/* recolor the glyphs */
.js-plotly-plot .modebar-btn svg path,
.js-plotly-plot .modebar-btn svg polygon{
  fill: var(--plotly-icon) !important;
}
.js-plotly-plot .modebar-btn:hover svg path,
.js-plotly-plot .modebar-btn:hover svg polygon{
  fill: var(--plotly-icon-hover) !important;
}
.js-plotly-plot .modebar-btn.active svg path,
.js-plotly-plot .modebar-btn.active svg polygon{
  fill: var(--plotly-icon-active) !important;
}

/* rangeslider background */
.js-plotly-plot .rangeslider-bg rect{
  fill: var(--plotly-rs-bg) !important;
}



/* Minimal, non-intrusive modebar styling */
.js-plotly-plot .modebar { background: transparent; }
.js-plotly-plot .modebar-btn svg path,
.js-plotly-plot .modebar-btn svg polygon { fill: #cbd5e1 !important; }
.js-plotly-plot .modebar-btn:hover { background: rgba(255,255,255,0.08) !important; border-radius: 8px; }

/* ---- Plotly modebar: kill light blue hover/active ---- */
.js-plotly-plot .modebar { background: transparent !important; }

/* group container background */
.js-plotly-plot .modebar-group {
  background: rgba(0,0,0,0.28) !important;   /* subtle dark */
  border-radius: 8px !important;
}

/* button states */
.js-plotly-plot .modebar-btn { 
  background: transparent !important;
  box-shadow: none !important;
}
.js-plotly-plot .modebar-btn:hover,
.js-plotly-plot .modebar-btn:focus,
.js-plotly-plot .modebar-btn.active {
  background: rgba(255,255,255,0.08) !important;  /* NOT blue */
  box-shadow: none !important;
  outline: none !important;
}

/* icon color (SVG paths & polygons) */
.js-plotly-plot .modebar-btn svg path,
.js-plotly-plot .modebar-btn svg polygon {
  fill: #d1d5db !important;    /* light gray icon */
  stroke: none !important;
}
.js-plotly-plot .modebar-btn:hover svg path,
.js-plotly-plot .modebar-btn:hover svg polygon,
.js-plotly-plot .modebar-btn.active svg path,
.js-plotly-plot .modebar-btn.active svg polygon {
  fill: #f8fafc !important;    /* a bit brighter on hover */
}

/* remove any browser focus ring */
.js-plotly-plot .modebar-btn:focus-visible { outline: none !important; }

.plotly-notifier { display: none !important; }

/* --- SLO pill: glass gradient + soft shadow to match controls --- */
.controls .slo-combo{
  display:flex; align-items:center; gap:14px; padding:10px 14px;
  border-radius:999px;
  background:
    linear-gradient(180deg, color-mix(in srgb, #fff 92%, transparent) 0%, transparent 100%),
    var(--surface-weak);
  border:1px solid var(--glass-border);
  -webkit-backdrop-filter: blur(22px) saturate(180%);
  backdrop-filter: blur(22px) saturate(180%);
  box-shadow:
    0 1px 0 rgba(255,255,255,.45) inset,
    0 10px 24px rgba(16,18,27,.10);
}

/* inline label + value styling */
.slo-item{ display:flex; align-items:center; gap:1px; }
.slo-item label{
  font-size:12px; font-weight:800; letter-spacing:.02em;
  color: var(--ink-muted);
}

/* value chip look for inputs (like other counters) */
.slo-inline-field{
  width:84px; padding:6px 12px; border:0; border-radius:999px;
  background: rgba(255,255,255,.75);
  color: var(--ink); font-size:13px; font-weight:800; outline:none;
  box-shadow: 0 1px 0 rgba(255,255,255,.45) inset;
  transition: background var(--dur-quick) var(--ease-spring), box-shadow var(--dur-quick);
}
.slo-inline-field::placeholder{ color: color-mix(in srgb, var(--ink-muted) 80%, transparent); }

/* focus = subtle blue glow to match primary */
.slo-inline-field:focus{
  background: var(--surface-strong);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--blue) 22%, transparent),
    0 1px 0 rgba(255,255,255,.5) inset;
}

/* divider tone aligned with other pills */
.slo-divider{
  width:1px; height:22px;
  background: color-mix(in srgb, var(--glass-border) 80%, #fff 20%);
  border-radius:1px;
}

/* hover polish consistent with controls */
.controls .slo-combo:hover{
  box-shadow:
    0 1px 0 rgba(255,255,255,.45) inset,
    0 14px 30px rgba(16,18,27,.14);
}

/* dark mode tune */
@media (prefers-color-scheme: dark){
  .controls .slo-combo{
    background:
      linear-gradient(180deg, rgba(255,255,255,.06), transparent),
      var(--surface-weak);
    border-color: var(--glass-border);
  }
  .slo-inline-field{
    background: rgba(255,255,255,.10);
    color: var(--ink);
    box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
  }
  .slo-inline-field:focus{
    background: rgba(255,255,255,.16);
    box-shadow:
      0 0 0 2px color-mix(in srgb, var(--blue) 30%, transparent),
      0 1px 0 rgba(255,255,255,.08) inset;
  }
}




/* states */
.slo-combo.ok{
  border-color: color-mix(in srgb, var(--green) 50%, #fff 50%);
  box-shadow: 0 1px 0 rgba(255,255,255,.06) inset, 0 12px 26px rgba(0,0,0,.22),
              0 0 0 3px color-mix(in srgb, var(--green) 18%, transparent);
}
.slo-combo.bad{
  border-color: color-mix(in srgb, var(--red) 50%, #fff 50%);
  box-shadow: 0 1px 0 rgba(255,255,255,.06) inset, 0 12px 26px rgba(0,0,0,.22),
              0 0 0 3px color-mix(in srgb, var(--red) 18%, transparent);
}

/* the tiny dot at the start reflects state */
.slo-combo::before{ content:""; width:6px; height:6px; border-radius:999px; margin-right:6px; background:#aaa; }
.slo-combo.ok::before  { background: var(--green); box-shadow: 0 0 0 3px rgba(52,199,89,.18); }
.slo-combo.bad::before { background: var(--red);   box-shadow: 0 0 0 3px rgba(255,59,48,.18); }

/* read-only score chip that matches .slo-inline-field look */
.score-value{
  display:inline-block;
  min-width:84px;
  padding:6px 12px;
  border-radius:999px;
  background: rgba(255,255,255,.75);
  color: var(--ink);
  font-size:13px;
  font-weight:800;
  line-height:1;
  text-align:center;
  box-shadow: 0 1px 0 rgba(255,255,255,.45) inset;
}
@media (prefers-color-scheme: dark){
  .score-value{
    background: rgba(255,255,255,.10);
    color: var(--ink);
    box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
  }
}

/* Compact width for Energy and Runtime inputs in the controls bar */
#energy_input.slo-inline-field,
#runtime_input.slo-inline-field{
  width:56px;           /* was 84px */
  padding:6px 10px;     /* keep pill feel while tighter */
  text-align:center;    /* keep values readable in the narrow chip */
}


.controls .slo-combo::before{
  content: none !important;
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  margin: 0 !important;
}

.controls .slo-combo{ padding-left: 8px; }

/* Two-column layout for results + charts */
.section-columns {
  display: grid;
  grid-template-columns: 0.9fr 1.6fr;
  gap: var(--gap, 1rem);
  align-items: start;
}

/* Stack on small screens */
@media (max-width: 900px) {
  .section-columns {
    grid-template-columns: 1fr;
  }
}

/* Add consistent space after the Current Topology card */
.card > #topoTable,
.card > #topologyJSON {
  /* Ensure these selectors target the topology card only */
}
.card h3:contains("Current Topology") {
  /* This selector is not supported in pure CSS, so use the card itself */
}
/* Solution: target the first .card after .metrics for spacing */
.card {
  /* ...existing card styles... */
  /* Add margin-bottom for spacing after topology card */
  margin-bottom: 32px;
}

/* Remove extra margin for other cards to avoid double spacing */
.section-columns .card {
  margin-bottom: 0;
}
.section-stack .card {
  margin-bottom: 0;
}

/* Normalize LLM feedback and priority styling */
.llm-feedback-section {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    padding: 1rem;
    margin-bottom: 1rem;
}

.llm-feedback-section h4 {
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
}

.feedback-value {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.25rem;
    padding: 0.5rem;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 0.875rem;
    color: #374151;
    display: inline-block;
    min-width: 3rem;
    text-align: center;
}

.priority-section {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    padding: 1rem;
    margin-bottom: 1rem;
}

.priority-section h4 {
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
}

.priority-value {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.25rem;
    padding: 0.5rem;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 0.875rem;
    color: #374151;
    display: inline-block;
    min-width: 4rem;
    text-align: center;
}

/* Action type styling */
.action-value {
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    display: inline-block;
    font-size: 0.875rem;
}

.action-upscale {
    background: #fef3c7;
    color: #92400e;
}

.action-slightly-upscale {
    background: #fef7cd;
    color: #a16207;
}

.action-downscale {
    background: #fecaca;
    color: #b91c1c;
}

.action-slightly-downscale {
    background: #fed7d7;
    color: #c53030;
}

.action-maintain {
    background: #d1fae5;
    color: #065f46;
}

/* Remove the blue background from existing elements */
.card .bg-light-blue {
    background: #f9fafb !important;
    border: 1px solid #e5e7eb !important;
    border-radius: 0.25rem !important;
}

